<?php

use Spryker\Shared\Application\ApplicationConstants;
use Spryker\Shared\Setup\SetupConstants;
use Spryker\Shared\Storage\StorageConstants;
use Spryker\Shared\Session\SessionConstants;
use Spryker\Shared\Propel\PropelConstants;


$config[ApplicationConstants::ELASTICA_PARAMETER__HOST] = '{{ getv "/es/host" }}';
$config[ApplicationConstants::ELASTICA_PARAMETER__TRANSPORT] = '{{ getv "/es/protocol" }}';
$config[ApplicationConstants::ELASTICA_PARAMETER__PORT] = '{{ getv "/es/port" }}';
$config[ApplicationConstants::ELASTICA_PARAMETER__AUTH_HEADER] = '';
$config[ApplicationConstants::ELASTICA_PARAMETER__INDEX_NAME] = null; // Store related config
$config[ApplicationConstants::ELASTICA_PARAMETER__DOCUMENT_TYPE] = 'page';

$config[StorageConstants::STORAGE_REDIS_PROTOCOL] = 'tcp';
$config[StorageConstants::STORAGE_REDIS_HOST]     = '{{ getv "/redis/storage/host" }}';
$config[StorageConstants::STORAGE_REDIS_PORT]     = '{{ getv "/redis/storage/port" }}';
$config[StorageConstants::STORAGE_REDIS_PASSWORD] = '{{ getv "/redis/storage/password" }}';
$config[StorageConstants::STORAGE_REDIS_DATABASE] = 0;

/**
 * Hostname(s) for Yves - Shop frontend
 * In production you probably use a CDN for static content
 * But BE AWARE: session domain has to match the sites domain!
 */
$config[ApplicationConstants::HOST_YVES]
    = $config[ApplicationConstants::HOST_STATIC_ASSETS]
    = $config[ApplicationConstants::HOST_STATIC_MEDIA]
    = $config[ApplicationConstants::HOST_SSL_YVES]
    = $config[ApplicationConstants::HOST_SSL_STATIC_ASSETS]
    = $config[ApplicationConstants::HOST_SSL_STATIC_MEDIA]
    = $config[SessionConstants::YVES_SESSION_COOKIE_NAME]
    = $config[SessionConstants::YVES_SESSION_COOKIE_DOMAIN]
    = '{{ getv "/yves/host" }}';

/**
 * Hostname(s) for Zed - Shop frontend
 * In production you probably use HTTPS for Zed
 */
$config[ApplicationConstants::HOST_ZED_GUI]
    = $config[ApplicationConstants::HOST_ZED_API]
    = $config[ApplicationConstants::HOST_SSL_ZED_GUI]
    = $config[ApplicationConstants::HOST_SSL_ZED_API]
    = '{{ getv "/zed/host" }}';

$config[SessionConstants::YVES_SESSION_SAVE_HANDLER]          = SessionConstants::SESSION_HANDLER_REDIS;
$config[SessionConstants::YVES_SESSION_TIME_TO_LIVE]          = SessionConstants::SESSION_LIFETIME_1_HOUR;
$config[SessionConstants::YVES_SESSION_FILE_PATH]             = session_save_path();
$config[SessionConstants::YVES_SESSION_PERSISTENT_CONNECTION] = $config[StorageConstants::STORAGE_PERSISTENT_CONNECTION];

$config[SessionConstants::YVES_SESSION_REDIS_PROTOCOL] = 'tcp';
$config[SessionConstants::YVES_SESSION_REDIS_HOST]     = '{{ getv "/redis/session/host" }}';
$config[SessionConstants::YVES_SESSION_REDIS_PORT]     = '{{ getv "/redis/session/port" }}';
$config[SessionConstants::YVES_SESSION_REDIS_PASSWORD] = '{{ getv "/redis/session/password" }}';
$config[SessionConstants::YVES_SESSION_REDIS_DATABASE] = 1;

$config[SessionConstants::ZED_SESSION_REDIS_PROTOCOL] = 'tcp';
$config[SessionConstants::ZED_SESSION_REDIS_HOST]     = '{{ getv "/redis/session/host" }}';
$config[SessionConstants::ZED_SESSION_REDIS_PORT]     = '{{ getv "/redis/session/port" }}';
$config[SessionConstants::ZED_SESSION_REDIS_PASSWORD] = '{{ getv "/redis/session/password" }}';
$config[SessionConstants::ZED_SESSION_REDIS_DATABASE] = 2;

$config[SetupConstants::JENKINS_BASE_URL] = '{{ getv "/jenkins/baseurl" }}';
# FIXME [bug01] jenkins console commands of spryker/setup do not relies
# completely of calls to a remote jenkins call
$config[SetupConstants::JENKINS_DIRECTORY] = '/tmp/jenkins/jobs';

$config[PropelConstants::ZED_DB_ENGINE]   = $config[PropelConstants::ZED_DB_ENGINE_PGSQL];
$config[PropelConstants::ZED_DB_USERNAME] = '{{ getv "/zed/db/username" }}';
$config[PropelConstants::ZED_DB_PASSWORD] = '{{ getv "/zed/db/password" }}';
$config[PropelConstants::ZED_DB_DATABASE] = '{{ getv "/zed/db/database" }}';
$config[PropelConstants::ZED_DB_HOST]     = '{{ getv "/zed/db/host" }}';
$config[PropelConstants::ZED_DB_PORT]     = '{{ getv "/zed/db/port" }}';

$config[ApplicationConstants::ELASTICA_PARAMETER__INDEX_NAME] = 'de_search';

# Use commands to remote databases instead of local sudo commands. database
# specific client tools like psql for postgres are required nevertheless.
$config[PropelConstants::USE_SUDO_TO_MANAGE_DATABASE] = false;
